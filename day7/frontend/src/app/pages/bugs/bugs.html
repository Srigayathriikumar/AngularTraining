<div class="bugs-container">
  <div class="header">
    <h1>üêõ BUG DASH</h1>
    <div class="stats">
      <span class="stat-item">Total: {{bugs.length}}</span>
      <span class="stat-item">Filtered: {{filteredBugs.length}}</span>
    </div>
  </div>
  
  <div class="filters-card">
    <div class="filter-group">
      <label>Status:</label>
      <select [(ngModel)]="selectedStatus" (change)="filterBugs()">
        <option *ngFor="let status of statusOptions" [value]="status.value">{{status.label}}</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Priority:</label>
      <select [(ngModel)]="selectedPriority" (change)="filterBugs()">
        <option *ngFor="let priority of priorityOptions" [value]="priority.value">{{priority.label}}</option>
      </select>
    </div>
  </div>
  
  <div *ngIf="error" class="error">{{error}}</div>
  <div *ngIf="successMessage" class="success">{{successMessage}}</div>
  
  <div class="action-buttons" *ngIf="canAddBug">
    <button (click)="openAddForm()" class="add-btn">‚ûï Add New Bug</button>
  </div>
  
  <div *ngIf="bugs.length > 0; else noBugs" class="table-container">
    <table class="bugs-table">
      <thead>
        <tr>
          <th (click)="sortBy('id')" class="sortable">ID <span class="sort-icon">{{sortColumn === 'id' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th (click)="sortBy('title')" class="sortable">Title <span class="sort-icon">{{sortColumn === 'title' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th (click)="sortBy('status')" class="sortable">Status <span class="sort-icon">{{sortColumn === 'status' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th (click)="sortBy('priority')" class="sortable">Priority <span class="sort-icon">{{sortColumn === 'priority' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th (click)="sortBy('assignee')" class="sortable">Assignee <span class="sort-icon">{{sortColumn === 'assignee' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th (click)="sortBy('project')" class="sortable">Project <span class="sort-icon">{{sortColumn === 'project' ? (sortDirection === 'asc' ? '‚Üë' : '‚Üì') : '‚Üï'}}</span></th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let bug of paginatedBugs" class="table-row">
          <td>{{bug.id}}</td>
          <td>{{bug.title}}</td>
          <td><span class="status-badge" [ngClass]="'status-' + bug.status.toLowerCase().replace(' ', '-')">{{bug.status}}</span></td>
          <td><span class="priority-badge" [ngClass]="'priority-' + bug.priority.toLowerCase()">{{bug.priority}}</span></td>
          <td>{{bug.assignee}}</td>
          <td>{{bug.project}}</td>
          <td>
            <button *ngIf="canEditBug" (click)="openEditForm(bug)" class="edit-btn">‚úèÔ∏è Edit</button>
          </td>
        </tr>
      </tbody>
    </table>
    
    <div class="pagination" *ngIf="totalPages > 1">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1" class="page-btn">‚Äπ</button>
      <button *ngFor="let page of [].constructor(totalPages); let i = index" 
              (click)="goToPage(i + 1)" 
              [class.active]="currentPage === i + 1" 
              class="page-btn">{{i + 1}}</button>
      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages" class="page-btn">‚Ä∫</button>
    </div>
  </div>
  
  <ng-template #noBugs>
    <div class="no-bugs">
      <div class="empty-state">
        <div class="empty-icon">üîç</div>
        <h3>No bugs found</h3>
        <p>Try adjusting your filters or check back later.</p>
      </div>
    </div>
  </ng-template>
  
  <!-- Add Bug Form Modal -->
  <div *ngIf="showAddForm" class="modal-overlay">
    <div class="modal">
      <h2>Add New Bug</h2>
      <form (ngSubmit)="addBug()">
        <div class="form-group">
          <label>Title:</label>
          <input [(ngModel)]="newBug.title" name="title" required>
        </div>
        <div class="form-group">
          <label>Status:</label>
          <select [(ngModel)]="newBug.status" name="status">
            <option value="Open">Open</option>
            <option value="in-Progress">In-Progress</option>
            <option value="Closed">Closed</option>
          </select>
        </div>
        <div class="form-group">
          <label>Priority:</label>
          <select [(ngModel)]="newBug.priority" name="priority">
            <option value="HIGH">High</option>
            <option value="MEDIUM">Medium</option>
            <option value="LOW">Low</option>
          </select>
        </div>
        <div class="form-group">
          <label>Assignee:</label>
          <input [(ngModel)]="newBug.assignee" name="assignee" required>
        </div>
        <div class="form-group">
          <label>Project:</label>
          <input [(ngModel)]="newBug.project" name="project" required>
        </div>
        <div class="form-actions">
          <button type="submit" class="save-btn">Save</button>
          <button type="button" (click)="closeAddForm()" class="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Edit Bug Form Modal -->
  <div *ngIf="showEditForm" class="modal-overlay">
    <div class="modal">
      <h2>Edit Bug</h2>
      <form (ngSubmit)="updateBug()">
        <div class="form-group">
          <label>Title:</label>
          <input [(ngModel)]="editBug.title" name="title" required>
        </div>
        <div class="form-group">
          <label>Status:</label>
          <select [(ngModel)]="editBug.status" name="status">
            <option value="Open">Open</option>
            <option value="in-Progress">In-Progress</option>
            <option value="Closed">Closed</option>
          </select>
        </div>
        <div class="form-group">
          <label>Priority:</label>
          <select [(ngModel)]="editBug.priority" name="priority">
            <option value="HIGH">High</option>
            <option value="MEDIUM">Medium</option>
            <option value="LOW">Low</option>
          </select>
        </div>
        <div class="form-group">
          <label>Assignee:</label>
          <input [(ngModel)]="editBug.assignee" name="assignee" required>
        </div>
        <div class="form-group">
          <label>Project:</label>
          <input [(ngModel)]="editBug.project" name="project" required>
        </div>
        <div class="form-actions">
          <button type="submit" class="save-btn">Update</button>
          <button type="button" (click)="closeEditForm()" class="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
